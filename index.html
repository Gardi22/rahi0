<!DOCTYPE html>
<html lang="en">
<head>
  <script defer src="/_vercel/insights/script.js"></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rahi's Study Hub</title>
  <style>
    :root {
      --bg: #f5f7fa;
      --card-bg: #ffffff;
      --text: #333;
      --primary: #6e48aa;
      --wrong: #ff6b6b;
    }
    /* Subject Colors */
    .subject-science { --primary: #3a86ff; }
    .subject-math { --primary: #ff006e; }
    .subject-social-studies { --primary: #ff9e00; }
    .subject-computing { --primary: #00b4d8; }
    .subject-english { --primary: #8338ec; }
    .dark-mode {
      --bg: #1a1a2e;
      --card-bg: #16213e;
      --text: #f1f1f1;
      --wrong: #ff8e8e;
    }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: var(--bg);
      color: var(--text);
      transition: all 0.3s;
      margin: 0;
      padding: 0;
      min-height: 100vh;
    }
    .dashboard, .flashcard-mode {
      display: none;
      padding: 20px;
      max-width: 1200px;
      margin: 0 auto;
      position: relative;
    }
    .active-mode {
      display: block;
    }
    .watermark {
      position: fixed;
      font-size: 12px;
      opacity: 0.5;
      z-index: 100;
      color: var(--primary);
    }
    .top-left { top: 10px; left: 10px; }
    .top-right { top: 10px; right: 10px; }
    .bottom-left { bottom: 10px; left: 10px; }
    .bottom-right { bottom: 10px; right: 10px; }
    h1 {
      text-align: center;
      color: var(--primary);
      margin-bottom: 30px;
    }
    .subject-card {
      background: var(--card-bg);
      border-radius: 15px;
      padding: 20px;
      margin: 15px 0;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: transform 0.3s;
      border-left: 5px solid var(--primary);
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      position: relative;
      overflow: hidden;
    }
    .subject-card:hover {
      transform: translateY(-5px);
    }
    .subject-card h2 {
      margin-top: 0;
      color: var(--primary);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .subject-card h2::after {
      content: "‚Ä∫";
      font-size: 1.5rem;
      transition: transform 0.3s;
      display: inline-block;
      margin-left: 10px;
    }
    .subject-card.expanded h2::after {
      transform: rotate(90deg);
    }
    .topic-list {
      max-height: 0;
      opacity: 0;
      overflow: hidden;
      transition: all 0.3s ease-in-out;
      margin-top: 0;
    }
    .subject-card.expanded .topic-list {
      max-height: 500px;
      opacity: 1;
      margin-top: 15px;
    }
    .topic {
      background: var(--primary);
      color: white;
      padding: 10px 15px;
      border-radius: 8px;
      font-size: 0.9rem;
      opacity: 0.9;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .topic:hover {
      opacity: 1;
      transform: translateX(5px);
    }
    .direct-subject {
      margin-top: 15px;
    }
    .back-button {
      background: #666;
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 5px;
      cursor: pointer;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 5px;
    }
    .flashcard-container {
      perspective: 1000px;
      width: calc(100% - 250px); /* Account for timer width */
      max-width: 800px;
      margin: 20px auto;
      position: relative;
    }
    .subject-label {
      text-align: center;
      font-weight: bold;
      color: var(--primary);
      margin-bottom: 5px;
      font-size: 1.2rem;
    }
    .topic-label {
      text-align: center;
      font-size: 1rem;
      opacity: 0.8;
      margin-bottom: 15px;
      color: var(--primary);
    }
    .flashcard {
      width: 100%;
      height: 500px; /* Increased height */
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.6s;
      cursor: pointer;
      border-radius: 15px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    }
    .flashcard.flipped {
      transform: rotateY(180deg);
    }
    .flashcard-front, .flashcard-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 20px;
      box-sizing: border-box;
      background: var(--card-bg);
      border-radius: 15px;
      text-align: center;
      overflow-y: auto;
    }
    .flashcard-back {
      transform: rotateY(180deg);
      background: var(--primary);
      color: white;
    }
    .flashcard-corner {
      position: absolute;
      font-size: 10px;
      opacity: 0.5;
    }
    .fc-tl { top: 5px; left: 5px; }
    .fc-tr { top: 5px; right: 5px; }
    .fc-bl { bottom: 5px; left: 5px; }
    .fc-br { bottom: 5px; right: 5px; }
    .controls {
      display: flex;
      gap: 15px;
      margin-top: 20px;
      justify-content: center;
    }
    button {
      background: var(--primary);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 50px;
      cursor: pointer;
      font-weight: bold;
      transition: transform 0.2s;
    }
    button:hover {
      transform: scale(1.05);
    }
    button.wrong {
      background: var(--wrong);
    }
    .progress {
      margin-top: 20px;
      font-weight: bold;
      text-align: center;
    }
    .theme-toggle {
      position: fixed;
      top: 20px;
      right: 20px;
      background: var(--primary);
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border: none;
      color: white;
      z-index: 100;
    }
    .review-box {
      margin-top: 30px;
      padding: 15px;
      border-radius: 10px;
      background: var(--wrong);
      color: white;
      display: none;
    }
    .review-box h3 {
      margin-top: 0;
    }
    .empty-message {
      text-align: center;
      color: #666;
      font-style: italic;
      margin-top: 50px;
    }
    .flashcard-img {
      max-width: 100%;
      max-height: 180px;
      width: 300px;  /* Added specific width */
      height: 200px; /* Added specific height */
      margin: 10px 0;
      border-radius: 8px;
      border: 1px solid rgba(0,0,0,0.1);
      object-fit: contain; /* Maintains aspect ratio */
    }
    .flashcard-content {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
      width: 100%;
    }
    .img-caption {
      font-size: 0.9rem;
      color: var(--text);
      opacity: 0.8;
    }
    .dark-mode .img-caption {
      color: white;
    }
    .timer-container {
      position: fixed;
      right: 20px;
      top: 50%;
      transform: translateY(-50%);
      width: 220px;
      text-align: center;
      padding: 25px;
      background: var(--card-bg);
      border-radius: 20px;
      box-shadow: 0 5px 25px rgba(0,0,0,0.15);
      border: 2px solid var(--primary);
      z-index: 10;
    }

    .study-label {
      color: var(--primary);
      font-size: 1.3rem;
      font-weight: 600;
      margin-bottom: 15px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .timer {
      font-family: 'Consolas', monospace;
      font-size: 2.4rem;
      font-weight: bold;
      color: var(--primary);
      margin: 15px 0;
      text-shadow: 0 0 10px rgba(0,0,0,0.1);
      background: var(--bg);
      padding: 10px;
      border-radius: 10px;
    }

    .timer-control {
      background: transparent;
      border: 2px solid var(--primary);
      color: var(--primary);
      padding: 8px 15px;
      font-size: 1rem;
      margin-top: 5px;
    }

    .timer-control:hover {
      background: var(--primary);
      color: white;
    }

    .pause-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.8);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }

    .pause-content {
      background: var(--card-bg);
      padding: 30px;
      border-radius: 15px;
      text-align: center;
      max-width: 400px;
    }

    .pause-content h2 {
      color: var(--primary);
      margin-bottom: 15px;
    }

    .subject-card {
      position: relative;
      overflow: hidden;
    }

    .subject-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
      transform: translateX(-100%);
      transition: transform 0.6s;
    }

    .subject-card:hover::before {
      transform: translateX(100%);
    }

    .study-time-badge {
      position: static; /* Override previous absolute positioning */
      padding: 8px 15px;
      border-radius: 20px;
      font-size: 0.9rem;
      background: var(--primary);
      color: white;
      box-shadow: 0 3px 10px rgba(0,0,0,0.1);
      margin-left: 15px;
      white-space: nowrap;
    }

    .study-time-badge:empty::before {
      content: 'No study time yet';
      opacity: 0.7;
    }

    /* Enhanced classical clock styling */
    .clock-container {
      position: fixed;
      top: 40px;
      left: 20px;
      transform: scale(0.85);
      z-index: 100;
    }

    .clock {
      width: 180px;
      height: 180px;
      border: 6px solid var(--primary);
      border-radius: 50%;
      position: relative;
      background: var(--card-bg);
      box-shadow: 
        0 0 30px rgba(0,0,0,0.1),
        inset 0 0 40px rgba(0,0,0,0.05);
    }

    /* Beautiful hour markers */
    .clock::before {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background: 
        repeating-conic-gradient(
          from 0deg,
          var(--primary) 0deg 0.5deg,
          transparent 0.5deg 30deg
        );
      opacity: 0.5;
    }

    .hand {
      position: absolute;
      bottom: 50%;
      left: 50%;
      transform-origin: bottom;
      background: var(--primary);
      border-radius: 10px;
   }

    .hour { height: 30%; width: 4px; }
    .minute { height: 40%; width: 3px; }
    .second { height: 45%; width: 2px; background: #ff6b6b; }

    .center-dot {
      position: absolute;
      width: 15px;
      height: 15px;
      background: var(--primary);
      border: 3px solid var(--card-bg);
      border-radius: 50%;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 4;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    /* Simplified number markers */
    .number {
      position: absolute;
      width: 100%;
      height: 100%;
      text-align: center;
      transform: rotate(var(--rotation));
      font-size: 1rem;
      color: var(--text);
      display: block !important; /* Override the previous display: none */
    }

    .number span {
      display: inline-block;
      transform: rotate(calc(-1 * var(--rotation)));
    }

    /* Add hour markers */
    .clock::after {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: 50%;
    }

    .clock::before {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background: 
        repeating-conic-gradient(
          from 0deg,
          var(--primary) 0deg 2deg,
          transparent 2deg 30deg
        );
    }

    .card-jumper {
      position: fixed;
      left: 20px;
      top: 50%;
      transform: translateY(-50%);
      display: flex;
      gap: 10px;
      align-items: center;
      background: var(--card-bg);
      padding: 15px;
      border-radius: 15px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.15);
    }

    .card-jumper input {
      width: 100px;
      padding: 8px;
      border: 2px solid var(--primary);
      border-radius: 8px;
      background: var(--bg);
      color: var(--text);
    }

    .card-jumper button {
      padding: 8px 15px;
    }
  </style>
</head>
<body class="subject-science">
  <!-- Your name watermarked -->
  <div class="watermark top-left">Rahi Najeem</div>
  <div class="watermark top-right">Rahi Najeem</div>
  <div class="watermark bottom-left">Rahi Najeem</div>
  <div class="watermark bottom-right">Rahi Najeem</div>

  <button class="theme-toggle" onclick="toggleTheme()">‚òÄÔ∏è</button>

  <!-- Clock -->
  <div class="clock-container">
    <div class="clock">
      <div class="hand hour"></div>
      <div class="hand minute"></div>
      <div class="hand second"></div>
      <div class="center-dot"></div>
      <!-- Clock numbers -->
      <div class="number" style="--rotation: 0deg"><span>12</span></div>
      <div class="number" style="--rotation: 30deg"><span>1</span></div>
      <div class="number" style="--rotation: 60deg"><span>2</span></div>
      <div class="number" style="--rotation: 90deg"><span>3</span></div>
      <div class="number" style="--rotation: 120deg"><span>4</span></div>
      <div class="number" style="--rotation: 150deg"><span>5</span></div>
      <div class="number" style="--rotation: 180deg"><span>6</span></div>
      <div class="number" style="--rotation: 210deg"><span>7</span></div>
      <div class="number" style="--rotation: 240deg"><span>8</span></div>
      <div class="number" style="--rotation: 270deg"><span>9</span></div>
      <div class="number" style="--rotation: 300deg"><span>10</span></div>
      <div class="number" style="--rotation: 330deg"><span>11</span></div>
    </div>
  </div>

  <!-- Welcome Overlay -->
  <div id="welcomeOverlay" class="welcome-overlay">
    <div class="welcome-content">
      <h1>‚ú® Welcome to Rahi's Study Hub! ‚ú®</h1>
      <p>Your journey to efficient learning starts here.</p>
      <div class="features">
        <p>üìö Smart Flashcards</p>
        <p>‚è±Ô∏è Study Timer</p>
        <p>üìä Progress Tracking</p>
      </div>
      <button onclick="acceptAndContinue()" class="welcome-btn">Start Learning</button>
      <p class="agreement">¬© 2025 All rights reserved</p>
    </div>
  </div>

  <!-- Dashboard -->
  <div class="dashboard active-mode">
    <h1>Rahi's Study Hub</h1>
    
    <!-- Update the subject card structure -->
    <div class="subject-card" onclick="toggleSubject(this, 'science')">
      <div class="subject-info">
        <h2>Science</h2>
        <div class="topic-list">
          <!-- Update the topic div structure -->
          <div class="topic" onclick="enterFlashcardMode('science', 'physics')">
            <span>Physics</span>
            <span class="topic-time" data-subject="science" data-topic="physics"></span>
          </div>
          <div class="topic" onclick="enterFlashcardMode('science', 'human-body')">
            Human Body
            <span class="study-time-badge"></span>
          </div>
          <div class="topic" onclick="enterFlashcardMode('science', 'chemistry')">
            Chemistry
            <span class="study-time-badge"></span>
          </div>
        </div>
      </div>
      <div class="study-time-badge"></div>
    </div>
    
    <div class="subject-card" onclick="toggleSubject(this, 'math')">
      <h2>Mathematics</h2>
      <div class="topic-list">
        <div class="topic" onclick="enterFlashcardMode('math', 'algebra3')">Algebra 3</div>
        <div class="topic" onclick="enterFlashcardMode('math', 'geometry2')">Geometry 2</div>
      </div>
    </div>
    
    <div class="subject-card direct-subject" onclick="enterFlashcardMode('social-studies', 'social-studies')">
      <h2>Social Studies</h2>
    </div>
    
    <div class="subject-card direct-subject" onclick="enterFlashcardMode('computing', 'computing')">
      <h2>Computing</h2>
    </div>
    
    <div class="subject-card" onclick="toggleSubject(this, 'english')">
      <h2>English</h2>
      <div class="topic-list">
        <div class="topic" onclick="enterFlashcardMode('english', 'vocabulary')">Vocabulary (Anthology)</div>
        <div class="topic" onclick="enterFlashcardMode('english', 'grammar')">Grammar</div>
      </div>
    </div>
  </div>

  <!-- Flashcard Mode -->
  <div class="flashcard-mode">
    <button class="back-button" onclick="backToDashboard()">‚Äπ Back to Subjects</button>
    <div class="subject-label" id="subjectLabel">SCIENCE</div>
    <div class="topic-label" id="topicLabel">PHYSICS</div>
    
    <div class="timer-container">
      <div class="study-label">Time Studied</div>
      <div class="timer" id="timer">00:00:00</div>
      <button class="timer-control" id="timerControl" onclick="toggleTimer()">
        <span class="timer-icon">‚è∏Ô∏è</span>
      </button>
    </div>
    
    <div class="card-jumper">
      <input type="number" id="jumpInput" min="1" placeholder="Jump to card...">
      <button onclick="jumpToCard()">Go</button>
    </div>
    
    <div class="flashcard-container">
      <div class="flashcard" onclick="flipCard()">
        <div class="flashcard-front">
          <div class="flashcard-corner fc-tl">Rahi Najeem</div>
          <div class="flashcard-corner fc-tr">Rahi Najeem</div>
          <div class="flashcard-corner fc-bl">Rahi Najeem</div>
          <div class="flashcard-corner fc-br">Rahi Najeem</div>
          <div class="flashcard-content" id="flashcardQuestion">
            <p>Click "Next" to begin</p>
          </div>
        </div>
        <div class="flashcard-back">
          <div class="flashcard-content" id="flashcardAnswer">
            <p>Your flashcards will appear here</p>
          </div>
        </div>
      </div>
    </div>
    
    <div id="emptyMessage" class="empty-message">
      No flashcards added yet. Add your questions to the database.
    </div>
    
    <div class="controls">
      <button onclick="prevCard()">‚Üê Previous</button>
      <button class="wrong" onclick="markWrong()">Didn't Know</button>
      <button onclick="nextCard()">Next ‚Üí</button>
    </div>
    
    <div class="progress" id="progressText">Card 0 of 0</div>
    
    <div class="review-box" id="reviewBox">
      <h3>Review These Cards:</h3>
      <ul id="wrongCardsList"></ul>
    </div>
    
    <!-- Add this HTML for the pause overlay -->
    <div id="pauseOverlay" class="pause-overlay">
      <div class="pause-content">
        <h2>Taking a Break?</h2>
        <p>Your progress is saved. Ready to continue learning?</p>
        <button onclick="resumeTimer()">Continue Studying</button>
      </div>
    </div>
  </div>

  <script src="flashcards.js"></script>
  <script>
    // Current state
    let currentMode = 'dashboard';
    let currentSubject = '';
    let currentTopic = '';
    let currentCardIndex = 0;
    let isDark = false;
    let wrongCards = [];
    let filteredCards = [];
    let seconds = 0;
    let timer = null;
    let subjectTimes = {};
    let topicTimes = {};

    // DOM elements
    const dashboardEl = document.querySelector('.dashboard');
    const flashcardModeEl = document.querySelector('.flashcard-mode');
    const subjectLabelEl = document.getElementById('subjectLabel');
    const topicLabelEl = document.getElementById('topicLabel');
    const questionEl = document.getElementById('flashcardQuestion');
    const answerEl = document.getElementById('flashcardAnswer');
    const progressEl = document.getElementById('progressText');
    const reviewBoxEl = document.getElementById('reviewBox');
    const wrongCardsListEl = document.getElementById('wrongCardsList');
    const emptyMessageEl = document.getElementById('emptyMessage');
    const controlsEl = document.querySelector('.controls');
    const flashcardContainerEl = document.querySelector('.flashcard-container');

    // Navigation functions
    function toggleSubject(element, subject, event) {
      if (event) event.stopPropagation();
      
      // Don't toggle direct subjects
      if (element.classList.contains('direct-subject')) {
        enterFlashcardMode(subject, subject);
        return;
      }
      
      // Close other expanded subjects
      document.querySelectorAll('.subject-card').forEach(card => {
        if (card !== element && !card.classList.contains('direct-subject')) {
          card.classList.remove('expanded');
        }
      });
      
      // Toggle current subject
      element.classList.toggle('expanded');
      
      // Update color scheme while preserving dark mode
      const isDarkMode = document.body.classList.contains('dark-mode');
      document.body.className = `subject-${subject}${isDarkMode ? ' dark-mode' : ''}`;
    }

    // Replace the existing enterFlashcardMode function
function enterFlashcardMode(subject, topic) {
  currentSubject = subject;
  currentTopic = topic;
  currentCardIndex = 0;
  filteredCards = flashcardsDatabase[subject][topic] || [];
  
  // Start timer immediately
  startTimer();
  
  // Reset pause state
  isPaused = false;
  document.getElementById('timerControl').innerHTML = '<span class="timer-icon">‚è∏Ô∏è</span>';
  document.getElementById('pauseOverlay').style.display = 'none';
  
  // Preserve dark mode when changing modes
  const isDarkMode = document.body.classList.contains('dark-mode');
  document.body.className = `subject-${subject}`;
  if (isDarkMode) document.body.classList.add('dark-mode');
  
  // Update UI
  dashboardEl.classList.remove('active-mode');
  flashcardModeEl.classList.add('active-mode');
  currentMode = 'flashcard';
  
  updateLabels();
  updateCardView();
  
  // Reset timer display
  document.getElementById('timer').textContent = '00:00:00';
}

    function backToDashboard() {
      dashboardEl.classList.add('active-mode');
      flashcardModeEl.classList.remove('active-mode');
      currentMode = 'dashboard';
      
      stopTimer();
      updateDashboardTimes();
    }

    function updateLabels() {
      // Format labels nicely
      const subjectNames = {
        'science': 'SCIENCE',
        'math': 'MATHEMATICS',
        'social-studies': 'SOCIAL STUDIES',
        'computing': 'COMPUTING',
        'english': 'ENGLISH'
      };
      
      const topicNames = {
        'physics': 'PHYSICS',
        'human-body': 'HUMAN BODY',
        'chemistry': 'CHEMISTRY',
        'algebra3': 'ALGEBRA 3',
        'geometry2': 'GEOMETRY 2',
        'social-studies': 'SOCIAL STUDIES',
        'computing': 'COMPUTING',
        'vocabulary': 'VOCABULARY (ANTHOLOGY)',
        'grammar': 'GRAMMAR'
      };
      
      subjectLabelEl.textContent = subjectNames[currentSubject] || currentSubject.toUpperCase();
      topicLabelEl.textContent = topicNames[currentTopic] || currentTopic.toUpperCase();
    }

    function updateCardView() {
      if (filteredCards.length === 0) {
        emptyMessageEl.style.display = 'block';
        controlsEl.style.display = 'none';
        flashcardContainerEl.style.display = 'none';
        progressEl.textContent = "No cards available";
        return;
      }
      
      emptyMessageEl.style.display = 'none';
      controlsEl.style.display = 'flex';
      flashcardContainerEl.style.display = 'block';
      
      const card = filteredCards[currentCardIndex];
      
      // Update question side
      questionEl.innerHTML = '';
      const questionText = document.createElement('p');
      questionText.textContent = card.question;
      questionEl.appendChild(questionText);
      
      if (card.questionImg) {
        const img = document.createElement('img');
        img.src = card.questionImg;
        img.className = 'flashcard-img';
        img.alt = 'Question image';
        img.style.width = '300px';   // Added specific width
        img.style.height = '200px';  // Added specific height
        questionEl.appendChild(img);
      }
      
      // Update answer side
      answerEl.innerHTML = '';
      const answerText = document.createElement('p');
      answerText.textContent = card.answer;
      answerEl.appendChild(answerText);
      
      if (card.answerImg) {
        const img = document.createElement('img');
        img.src = card.answerImg;
        img.className = 'flashcard-img';
        img.alt = 'Answer image';
        img.style.width = '300px';   // Added specific width
        img.style.height = '200px';  // Added specific height
        answerEl.appendChild(img);
      }
      
      progressEl.textContent = `Card ${currentCardIndex + 1} of ${filteredCards.length}`;
      
      // Reset flip state
      document.querySelector('.flashcard').classList.remove('flipped');
    }

    function flipCard() {
      if (filteredCards.length > 0) {
        document.querySelector('.flashcard').classList.toggle('flipped');
      }
    }

    function nextCard() {
      if (filteredCards.length === 0) return;
      
      if (currentCardIndex < filteredCards.length - 1) {
        currentCardIndex++;
      } else {
        currentCardIndex = 0;
      }
      updateCardView();
    }

    function prevCard() {
      if (filteredCards.length === 0) return;
      
      if (currentCardIndex > 0) {
        currentCardIndex--;
      } else {
        currentCardIndex = filteredCards.length - 1;
      }
      updateCardView();
    }

    function markWrong() {
      if (filteredCards.length === 0) return;
      
      wrongCards.push(filteredCards[currentCardIndex]);
      updateReviewBox();
      nextCard();
    }

    function updateReviewBox() {
      if (wrongCards.length > 0) {
        reviewBoxEl.style.display = 'block';
        wrongCardsListEl.innerHTML = wrongCards.map(card => {
          let content = `<li>${card.question}`;
          if (card.questionImg) {
            content += ` <small>[Image]</small>`;
          }
          content += ` ‚Üí <strong>${card.answer}</strong>`;
          if (card.answerImg) {
            content += ` <small>[Image]</small>`;
          }
          return content + '</li>';
        }).join('');
      } else {
        reviewBoxEl.style.display = 'none';
      }
    }

    function toggleTheme() {
      isDark = !isDark;
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
      
      // Preserve current subject class
      const currentSubjectClass = Array.from(document.body.classList)
        .find(cls => cls.startsWith('subject-'));
        
      document.body.className = currentSubjectClass || '';
      if (isDark) document.body.classList.add('dark-mode');
      
      document.querySelector('.theme-toggle').textContent = isDark ? 'üåô' : '‚òÄÔ∏è';
    }

    // Time tracking functions
    function formatTime(seconds) {
      const hrs = Math.floor(seconds / 3600);
      const mins = Math.floor((seconds % 3600) / 60);
      const secs = seconds % 60;
      return `${hrs > 0 ? `${hrs}:` : ''}${mins < 10 ? '0' : ''}${mins}:${secs < 10 ? '0' : ''}${secs}`;
    }

    let isPaused = false;
    let startTime = null;

    // Replace the existing timer functions
function startTimer() {
  if (!timer) {
    startTime = Date.now() - (seconds * 1000);
    timer = setInterval(updateTimer, 1000);
  }
}

function updateTimer() {
  if (!isPaused) {
    const elapsed = Math.floor((Date.now() - startTime) / 1000);
    seconds = elapsed;
    const hours = Math.floor(seconds / 3600);
    const minutes = Math.floor((seconds % 3600) / 60);
    const secs = seconds % 60;
    
    document.getElementById('timer').textContent = 
      `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
    
    // Update study times
    if (currentSubject && currentTopic) {
      updateTopicTime(currentSubject, currentTopic, 1);
    }
  }
}

    function toggleTimer() {
      isPaused = !isPaused;
      const timerControl = document.getElementById('timerControl');
      const pauseOverlay = document.getElementById('pauseOverlay');
      
      if (isPaused) {
        timerControl.innerHTML = '<span class="timer-icon">‚ñ∂Ô∏è</span>';
        pauseOverlay.style.display = 'flex';
      } else {
        timerControl.innerHTML = '<span class="timer-icon">‚è∏Ô∏è</span>';
        pauseOverlay.style.display = 'none';
      }
    }

    // Replace the resumeTimer function with this
    function resumeTimer() {
      isPaused = false;
      document.getElementById('timerControl').innerHTML = '<span class="timer-icon">‚è∏Ô∏è</span>';
      document.getElementById('pauseOverlay').style.display = 'none';
    }

    function stopTimer() {
      clearInterval(timer);
      timer = null;
      seconds = 0;
      updateTimerDisplay();
    }

    function updateDashboardTimes() {
      Object.entries(subjectTimes).forEach(([subject, time]) => {
        const badge = document.querySelector(`.subject-${subject} .study-time-badge`);
        if (badge) {
          badge.textContent = `Studied: ${formatTime(time)}`;
        }
      });
    }

    function updateTopicTime(subject, topic, seconds) {
      const key = `${subject}-${topic}`;
      topicTimes[key] = (topicTimes[key] || 0) + seconds;
      
      // Update the topic time display
      const timeElement = document.querySelector(
        `.topic-time[data-subject="${subject}"][data-topic="${topic}"]`
      );
      if (timeElement) {
        timeElement.textContent = formatTime(topicTimes[key]);
      }
    }

    // Keyboard controls
    document.addEventListener('keydown', (e) => {
      if (currentMode !== 'flashcard') return;
      
      if (e.key === 'ArrowRight') nextCard();
      if (e.key === 'ArrowLeft') prevCard();
      if (e.key === 'w') markWrong();
    });

    // Initialize
    updateLabels();
    
    // Add study time badges to subject cards
    document.querySelectorAll('.subject-card').forEach(card => {
      const badge = document.createElement('div');
      badge.className = 'study-time-badge';
      badge.textContent = 'Studied: 00:00:00';
      card.appendChild(badge);
    });

    // Welcome overlay logic
    function acceptAndContinue() {
      document.getElementById('welcomeOverlay').style.display = 'none';
    }

    // Close welcome overlay on initial load
    window.onload = () => {
      setTimeout(() => {
        document.getElementById('welcomeOverlay').style.display = 'none';
      }, 3000); // Auto-close after 3 seconds
    };

    function jumpToCard() {
      const jumpInput = document.getElementById('jumpInput');
      let cardNumber = parseInt(jumpInput.value) - 1;
      
      if (isNaN(cardNumber) || cardNumber < 0 || cardNumber >= filteredCards.length) {
        alert('Invalid card number');
        return;
      }
      
      currentCardIndex = cardNumber;
      updateCardView();
    }

    // Add this to prevent topic clicks from triggering subject toggle
    document.querySelectorAll('.topic').forEach(topic => {
      topic.addEventListener('click', (e) => {
        e.stopPropagation();
      });
    });

    // Add theme initialization
    document.addEventListener('DOMContentLoaded', () => {
      // Load saved theme
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme === 'dark') {
        isDark = true;
        document.body.classList.add('dark-mode');
        document.querySelector('.theme-toggle').textContent = 'üåô';
      }
    });

    // Add this after your existing state variables
function updateClock() {
  const now = new Date();
  const hours = now.getHours();
  const minutes = now.getMinutes();
  const seconds = now.getSeconds();

  const hourDeg = ((hours % 12) * 30) + (minutes * 0.5);
  const minuteDeg = minutes * 6;
  const secondDeg = seconds * 6;

  const hourHand = document.querySelector('.hour');
  const minuteHand = document.querySelector('.minute');
  const secondHand = document.querySelector('.second');

  hourHand.style.transform = `translateX(-50%) rotate(${hourDeg}deg)`;
  minuteHand.style.transform = `translateX(-50%) rotate(${minuteDeg}deg)`;
  secondHand.style.transform = `translateX(-50%) rotate(${secondDeg}deg)`;
}

// Update clock every second
setInterval(updateClock, 1000);
updateClock(); // Initial update
  </script>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="contact-info">
      <p>üìß Contact: gardi2386@gmail.com</p>
      <p>üìû Phone: +964 751 201 9773</p>
    </div>
    <p class="copyright">¬© 2025 Rahi's Study Hub. All rights reserved.</p>
  </footer>
</body>
</html>