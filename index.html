<!DOCTYPE html>
<html lang="en">
<head>
  <script defer src="/_vercel/insights/script.js"></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rahi's Study Hub</title>
  <style>
    :root {
      --bg: #f5f7fa;
      --card-bg: #ffffff;
      --text: #333;
      --primary: #6e48aa;
      --wrong: #ff6b6b;
    }
    
    .subject-science { --primary: #3a86ff; }
    .subject-math { --primary: #ff006e; }
    .subject-social-studies { --primary: #ff9e00; }
    .subject-computing { --primary: #00b4d8; }
    .subject-english { --primary: #8338ec; }
    .dark-mode {
      --bg: #1a1a2e;
      --card-bg: #16213e;
      --text: #f1f1f1;
      --wrong: #ff8e8e;
    }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: var(--bg);
      color: var(--text);
      transition: all 0.3s;
      margin: 0;
      padding: 0;
      min-height: 100vh;
    }
    .dashboard, .flashcard-mode {
      display: none;
      padding: 20px;
      max-width: 1200px;
      margin: 0 auto;
      position: relative;
    }
    .active-mode {
      display: block;
    }
    .watermark {
      position: fixed;
      font-size: 12px;
      opacity: 0.5;
      z-index: 100;
      color: var(--primary);
    }
    .top-left { top: 10px; left: 10px; }
    .top-right { top: 10px; right: 10px; }
    .bottom-left { bottom: 10px; left: 10px; }
    .bottom-right { bottom: 10px; right: 10px; }
    h1 {
      text-align: center;
      color: var(--primary);
      margin-bottom: 30px;
    }
    .subject-card {
      background: var(--card-bg);
      border-radius: 15px;
      padding: 20px;
      margin: 15px 0;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: transform 0.3s;
      border-left: 5px solid var(--primary);
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      position: relative;
      overflow: hidden;
    }
    .subject-card:hover {
      transform: translateY(-5px);
    }
    .subject-card h2 {
      margin-top: 0;
      color: var(--primary);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .subject-card h2::after {
      content: "›";
      font-size: 1.5rem;
      transition: transform 0.3s;
      display: inline-block;
      margin-left: 10px;
    }
    .subject-card.expanded h2::after {
      transform: rotate(90deg);
    }
    .topic-list {
      max-height: 0;
      opacity: 0;
      overflow: hidden;
      transition: all 0.3s ease-in-out;
      margin-top: 0;
    }
    .subject-card.expanded .topic-list {
      max-height: 500px;
      opacity: 1;
      margin-top: 15px;
    }
    .topic {
      background: var(--primary);
      color: white;
      padding: 10px 15px;
      border-radius: 8px;
      font-size: 0.9rem;
      opacity: 0.9;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .topic:hover {
      opacity: 1;
      transform: translateX(5px);
    }
    .direct-subject {
      margin-top: 15px;
    }
    .back-button {
      background: #666;
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 5px;
      cursor: pointer;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 5px;
    }
    .flashcard-container {
      perspective: 1000px;
      width: calc(100% - 250px);
      max-width: 800px;
      margin: 20px auto;
      position: relative;
    }
    .subject-label {
      text-align: center;
      font-weight: bold;
      color: var(--primary);
      margin-bottom: 5px;
      font-size: 1.2rem;
    }
    .topic-label {
      text-align: center;
      font-size: 1rem;
      opacity: 0.8;
      margin-bottom: 15px;
      color: var(--primary);
    }
    .flashcard {
      width: 100%;
      height: 500px; 
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.6s;
      cursor: pointer;
      border-radius: 15px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    }
    .flashcard.flipped {
      transform: rotateY(180deg);
    }
    .flashcard-front, .flashcard-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 20px;
      box-sizing: border-box;
      background: var(--card-bg);
      border-radius: 15px;
      text-align: center;
      overflow-y: auto;
    }
    .flashcard-back {
      transform: rotateY(180deg);
      background: var(--primary);
      color: white;
    }
    .flashcard-corner {
      position: absolute;
      font-size: 10px;
      opacity: 0.5;
    }
    .fc-tl { top: 5px; left: 5px; }
    .fc-tr { top: 5px; right: 5px; }
    .fc-bl { bottom: 5px; left: 5px; }
    .fc-br { bottom: 5px; right: 5px; }
    .controls {
      display: flex;
      gap: 15px;
      margin-top: 20px;
      justify-content: center;
    }
    button {
      background: var(--primary);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 50px;
      cursor: pointer;
      font-weight: bold;
      transition: transform 0.2s;
    }
    button:hover {
      transform: scale(1.05);
    }
    button.wrong {
      background: var(--wrong);
    }
    .progress {
      margin-top: 20px;
      font-weight: bold;
      text-align: center;
    }
    .theme-toggle {
      position: fixed;
      top: 20px;
      right: 20px;
      background: var(--primary);
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border: none;
      color: white;
      z-index: 100;
    }
    .mobile-toggle {
      position: fixed;
      top: 20px;
      right: 70px;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: var(--primary);
      border: none;
      color: white;
      font-size: 1.2rem;
      cursor: pointer;
      z-index: 100;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.3s;
    }
    .mobile-toggle:hover {
      transform: scale(1.1);
    }
    .review-box {
      margin-top: 30px;
      padding: 15px;
      border-radius: 10px;
      background: var(--wrong);
      color: white;
      display: none;
    }
    .review-box h3 {
      margin-top: 0;
    }
    .empty-message {
      text-align: center;
      color: #666;
      font-style: italic;
      margin-top: 50px;
    }
    .flashcard-img {
      max-width: 100%;
      max-height: 180px;
      width: 300px;  
      height: 200px; 
      margin: 10px 0;
      border-radius: 8px;
      border: 1px solid rgba(0,0,0,0.1);
      object-fit: contain; 
    }
    .flashcard-content {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
      width: 100%;
    }
    .img-caption {
      font-size: 0.9rem;
      color: var(--text);
      opacity: 0.8;
    }
    .dark-mode .img-caption {
      color: white;
    }
    .timer-container {
      position: static; 
      width: auto;
      margin: 0;
      padding: 10px;
      background: var(--card-bg);
      border-radius: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
      justify-content: center;
    }

    .study-label {
      color: var(--primary);
      font-size: 1.3rem;
      font-weight: 600;
      margin-bottom: 15px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .timer {
      font-family: 'Consolas', monospace;
      font-size: 2.4rem;
      font-weight: bold;
      color: var(--primary);
      margin: 15px 0;
      text-shadow: 0 0 10px rgba(0,0,0,0.1);
      background: var(--bg);
      padding: 10px;
      border-radius: 10px;
    }

    .timer-control {
      background: transparent;
      border: 2px solid var(--primary);
      color: var(--primary);
      padding: 8px 15px;
      font-size: 1rem;
      margin-top: 5px;
    }

    .timer-control:hover {
      background: var(--primary);
      color: white;
    }

    .pause-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.8);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }

    .pause-content {
      background: var(--card-bg);
      padding: 30px;
      border-radius: 15px;
      text-align: center;
      max-width: 400px;
    }

    .pause-content h2 {
      color: var(--primary);
      margin-bottom: 15px;
    }

    .subject-card {
      position: relative;
      overflow: hidden;
    }

    .subject-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
      transform: translateX(-100%);
      transition: transform 0.6s;
    }

    .subject-card:hover::before {
      transform: translateX(100%);
    }

    .study-time-badge {
      position: static; 
      padding: 8px 15px;
      border-radius: 20px;
      font-size: 0.9rem;
      background: var(--primary);
      color: white;
      box-shadow: 0 3px 10px rgba(0,0,0,0.1);
      margin-left: 15px;
      white-space: nowrap;
    }

    .study-time-badge:empty::before {
      content: 'No study time yet';
      opacity: 0.7;
    }

    
    .clock-container {
      position: fixed;
      top: 40px;
      left: 20px;
      transform: scale(0.85);
      z-index: 100;
    }

    .clock {
      width: 180px;
      height: 180px;
      border: 6px solid var(--primary);
      border-radius: 50%;
      position: relative;
      background: var(--card-bg);
      box-shadow: 
        0 0 30px rgba(0,0,0,0.1),
        inset 0 0 40px rgba(0,0,0,0.05);
    }

    
    .clock::before {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background: 
        repeating-conic-gradient(
          from 0deg,
          var(--primary) 0deg 0.5deg,
          transparent 0.5deg 30deg
        );
      opacity: 0.5;
    }

    .hand {
      position: absolute;
      bottom: 50%;
      left: 50%;
      transform-origin: bottom;
      background: var(--primary);
      border-radius: 10px;
   }

    .hour { height: 30%; width: 4px; }
    .minute { height: 40%; width: 3px; }
    .second { height: 45%; width: 2px; background: #ff6b6b; }

    .center-dot {
      position: absolute;
      width: 15px;
      height: 15px;
      background: var(--primary);
      border: 3px solid var(--card-bg);
      border-radius: 50%;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 4;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    
    .number {
      position: absolute;
      width: 100%;
      height: 100%;
      text-align: center;
      transform: rotate(var(--rotation));
      font-size: 1rem;
      color: var(--text);
      display: block !important; 
    }

    .number span {
      display: inline-block;
      transform: rotate(calc(-1 * var(--rotation)));
    }

  
    .clock::after {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: 50%;
    }

    .clock::before {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background: 
        repeating-conic-gradient(
          from 0deg,
          var(--primary) 0deg 2deg,
          transparent 2deg 30deg
        );
    }

    .card-jumper {
      position: fixed;
      left: 20px;
      top: 50%;
      transform: translateY(-50%);
      display: flex;
      gap: 10px;
      align-items: center;
      background: var(--card-bg);
      padding: 15px;
      border-radius: 15px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.15);
    }

    .card-jumper input {
      width: 100px;
      padding: 8px;
      border: 2px solid var(--primary);
      border-radius: 8px;
      background: var(--bg);
      color: var(--text);
    }

    .card-jumper button {
      padding: 8px 15px;
    }

  
.welcome-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(135deg, rgba(0,0,0,0.95), rgba(20,20,50,0.98));
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 2000;
  opacity: 0;
  transition: opacity 0.5s ease;
}

.welcome-content {
  background: rgba(255,255,255,0.1);
  backdrop-filter: blur(10px);
  padding: 40px;
  border-radius: 20px;
  text-align: center;
  max-width: 90%;
  width: 500px;
  color: white;
  box-shadow: 0 0 30px rgba(0,0,0,0.3);
  position: relative;
}

.timer-bar {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 3px;
  background: var(--primary);
  transform-origin: left;
  transition: transform 0.1s linear;
}

.welcome-btn {
  background: var(--primary);
  color: white;
  border: none;
  padding: 15px 30px;
  border-radius: 25px;
  font-size: 1.1rem;
  margin: 20px 0;
  cursor: pointer;
  transition: transform 0.2s;
}

.welcome-btn:hover {
  transform: scale(1.05);
}

.welcome-controls {
  display: flex;
  gap: 15px;
  justify-content: center;
  margin: 20px 0;
}

.notes-btn {
  background: transparent;
  color: white;
  border: none;
  padding: 5px 10px;
  cursor: pointer;
  font-size: 1.2rem;
  transition: transform 0.2s;
}

.notes-btn:hover {
  transform: scale(1.1);
}

.notes-modal {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.8);
  z-index: 2000;
  align-items: center;
  justify-content: center;
}

.notes-content {
  background: var(--card-bg);
  width: 90%;
  max-width: 800px;
  height: 80vh;
  border-radius: 20px;
  padding: 20px;
  position: relative;
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.notes-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-bottom: 10px;
  border-bottom: 2px solid var(--primary);
}

.notes-header h2 {
  color: var(--primary);
  margin: 0;
}

.notes-area {
  flex: 1;
  resize: none;
  padding: 15px;
  border: 1px solid var(--primary);
  border-radius: 10px;
  background: var(--bg);
  color: var(--text);
  font-size: 1rem;
  line-height: 1.5;
}

.notes-controls {
  display: flex;
  gap: 10px;
  justify-content: flex-end;
}

.mobile-view .notes-content {
  width: 95%;
  height: 90vh;
}
  </style>
</head>
<body class="subject-science">
  
  <div class="watermark top-left">Rahi Najeem</div>
  <div class="watermark top-right">Rahi Najeem</div>
  <div class="watermark bottom-left">Rahi Najeem</div>
  <div class="watermark bottom-right">Rahi Najeem</div>

  <button class="theme-toggle" onclick="toggleTheme()">☀️</button>
  <button class="mobile-toggle" onclick="toggleMobileView()" title="Toggle Mobile View">
  <span id="mobileIcon">📱</span>
</button>

  
  <div class="clock-container">
    <div class="clock">
      <div class="hand hour"></div>
      <div class="hand minute"></div>
      <div class="hand second"></div>
      <div class="center-dot"></div>
      
      <div class="number" style="--rotation: 0deg"><span>12</span></div>
      <div class="number" style="--rotation: 30deg"><span>1</span></div>
      <div class="number" style="--rotation: 60deg"><span>2</span></div>
      <div class="number" style="--rotation: 90deg"><span>3</span></div>
      <div class="number" style="--rotation: 120deg"><span>4</span></div>
      <div class="number" style="--rotation: 150deg"><span>5</span></div>
      <div class="number" style="--rotation: 180deg"><span>6</span></div>
      <div class="number" style="--rotation: 210deg"><span>7</span></div>
      <div class="number" style="--rotation: 240deg"><span>8</span></div>
      <div class="number" style="--rotation: 270deg"><span>9</span></div>
      <div class="number" style="--rotation: 300deg"><span>10</span></div>
      <div class="number" style="--rotation: 330deg"><span>11</span></div>
    </div>
  </div>

  <div id="welcomeOverlay" class="welcome-overlay">
    <div class="welcome-content">
      <h1>✨ Welcome to Rahi's Study Hub! ✨</h1>
      <p>Your journey to efficient learning starts here.</p>
      <div class="features">
        <p>📚 Smart Flashcards</p>
        <p>⏱️ Study Timer</p>
        <p>📊 Progress Tracking</p>
      </div>
      <div class="welcome-controls">
        <button class="theme-toggle welcome-theme-btn" onclick="toggleTheme()">☀️</button>
        <button class="mobile-toggle welcome-mobile-btn" onclick="toggleMobileView(true)">
          <span id="welcomeMobileIcon">📱</span>
        </button>
      </div>
      <button onclick="acceptAndContinue()" class="welcome-btn">Start Learning</button>
      <p class="agreement">© 2025 All rights reserved</p>
      <div class="timer-bar" id="welcomeTimer"></div>
    </div>
  </div>

  <div class="dashboard active-mode">
    <h1>Rahi's Study Hub</h1>
    
    <div class="subject-card" onclick="toggleSubject(this, 'science')">
      <div class="subject-info">
        <h2>Science</h2>
        <div class="topic-list">
          <div class="topic">
            <span onclick="enterFlashcardMode('science', 'physics')">Physics</span>
            <button class="notes-btn" onclick="openNotes('physics', event)">📝</button>
          </div>
          <div class="topic">
            <span onclick="enterFlashcardMode('science', 'human-body')">Human Body</span>
            <button class="notes-btn" onclick="openNotes('human-body', event)">📝</button>
          </div>
          <div class="topic">
            <span onclick="enterFlashcardMode('science', 'chemistry')">Chemistry</span>
            <button class="notes-btn" onclick="openNotes('chemistry', event)">📝</button>
          </div>
        </div>
      </div>
    </div>
    
    <div class="subject-card" onclick="toggleSubject(this, 'math')">
      <h2>Mathematics</h2>
      <div class="topic-list">
        <div class="topic" onclick="enterFlashcardMode('math', 'algebra3')">Algebra 3</div>
        <div class="topic" onclick="enterFlashcardMode('math', 'geometry2')">Geometry 2</div>
      </div>
    </div>
    
    <div class="subject-card direct-subject" onclick="enterFlashcardMode('social-studies', 'social-studies')">
      <h2>Social Studies</h2>
      <button class="notes-btn" onclick="openNotes('social-studies', event)">📝</button>
    </div>
    
    <div class="subject-card direct-subject" onclick="enterFlashcardMode('computing', 'computing')">
      <h2>Computing</h2>
    </div>
    
    <div class="subject-card" onclick="toggleSubject(this, 'english')">
      <h2>English</h2>
      <div class="topic-list">
        <div class="topic" onclick="enterFlashcardMode('english', 'vocabulary')">Vocabulary (Anthology)</div>
        <div class="topic" onclick="enterFlashcardMode('english', 'grammar')">Grammar</div>
      </div>
    </div>
  </div>

  <div class="flashcard-mode">
    <button class="back-button" onclick="backToDashboard()">‹ Back to Subjects</button>
    <div class="subject-label" id="subjectLabel">SCIENCE</div>
    <div class="topic-label" id="topicLabel">PHYSICS</div>
    
    <div class="controls">
  <div class="timer-container">
    <div class="timer" id="timer">00:00:00</div>
    <button class="timer-control" id="timerControl" onclick="toggleTimer()">
      <span class="timer-icon">⏸️</span>
    </button>
  </div>
  <button onclick="prevCard()">← Previous</button>
  <button class="wrong" onclick="markWrong()">Didn't Know</button>
  <button onclick="nextCard()">Next →</button>
</div>
    
    <div class="card-jumper">
      <input type="number" id="jumpInput" min="1" placeholder="Jump to card...">
      <button onclick="jumpToCard()">Go</button>
    </div>
    
    <div class="flashcard-container">
      <div class="flashcard" onclick="flipCard()">
        <div class="flashcard-front">
          <div class="flashcard-corner fc-tl">Rahi Najeem</div>
          <div class="flashcard-corner fc-tr">Rahi Najeem</div>
          <div class="flashcard-corner fc-bl">Rahi Najeem</div>
          <div class="flashcard-corner fc-br">Rahi Najeem</div>
          <div class="flashcard-content" id="flashcardQuestion">
            <p>Click "Next" to begin</p>
          </div>
        </div>
        <div class="flashcard-back">
          <div class="flashcard-content" id="flashcardAnswer">
            <p>Your flashcards will appear here</p>
          </div>
        </div>
      </div>
    </div>
    
    <div id="emptyMessage" class="empty-message">
      No flashcards added yet. Add your questions to the database.
    </div>
    
    <div class="progress" id="progressText">Card 0 of 0</div>
    
    <div class="review-box" id="reviewBox">
      <h3>Review These Cards:</h3>
      <ul id="wrongCardsList"></ul>
    </div>
    
    <div id="pauseOverlay" class="pause-overlay">
      <div class="pause-content">
        <h2>Taking a Break?</h2>
        <p>Your progress is saved. Ready to continue learning?</p>
        <button onclick="resumeTimer()">Continue Studying</button>
      </div>
    </div>
  </div>

  <div class="notes-modal" id="notesModal">
  <div class="notes-content">
    <div class="notes-header">
      <h2 id="notesTitle">Notes</h2>
      <button class="close-btn" onclick="closeNotes()">✖️</button>
    </div>
    <textarea id="notesArea" class="notes-area" placeholder="Write your notes here..."></textarea>
    <div class="notes-controls">
      <button class="save-btn" onclick="saveNotes(event)">💾 Save Notes</button>
    </div>
  </div>
</div>
  
  <script src="flashcards.js"></script>
  
  <script>
    let currentMode = 'dashboard';
    let currentSubject = '';
    let currentTopic = '';
    let currentCardIndex = 0;
    let isDark = false;
    let wrongCards = [];
    let filteredCards = [];
    let seconds = 0;
    let timer = null;
    let subjectTimes = {};
    let topicTimes = {};

    const dashboardEl = document.querySelector('.dashboard');
    const flashcardModeEl = document.querySelector('.flashcard-mode');
    const subjectLabelEl = document.getElementById('subjectLabel');
    const topicLabelEl = document.getElementById('topicLabel');
    const questionEl = document.getElementById('flashcardQuestion');
    const answerEl = document.getElementById('flashcardAnswer');
    const progressEl = document.getElementById('progressText');
    const reviewBoxEl = document.getElementById('reviewBox');
    const wrongCardsListEl = document.getElementById('wrongCardsList');
    const emptyMessageEl = document.getElementById('emptyMessage');
    const controlsEl = document.querySelector('.controls');
    const flashcardContainerEl = document.querySelector('.flashcard-container');

    let currentNotesTopic = '';
    const notesDatabase = JSON.parse(localStorage.getItem('studyNotes')) || {};

    function toggleSubject(element, subject, event) {
      if (event) event.stopPropagation();
      
      
      if (element.classList.contains('direct-subject')) {
        enterFlashcardMode(subject, subject);
        return;
      }
      
     
      document.querySelectorAll('.subject-card').forEach(card => {
        if (card !== element && !card.classList.contains('direct-subject')) {
          card.classList.remove('expanded');
        }
      });
      
     
      element.classList.toggle('expanded');
      
      
      const isDarkMode = document.body.classList.contains('dark-mode');
      document.body.className = `subject-${subject}${isDarkMode ? ' dark-mode' : ''}`;
    }

    
function enterFlashcardMode(subject, topic) {
  currentSubject = subject;
  currentTopic = topic;
  currentCardIndex = 0;
  filteredCards = flashcardsDatabase[subject][topic] || [];
  
  
  startTimer();
  
 
  isPaused = false;
  document.getElementById('timerControl').innerHTML = '<span class="timer-icon">⏸️</span>';
  document.getElementById('pauseOverlay').style.display = 'none';
  
  
  const isDarkMode = document.body.classList.contains('dark-mode');
  document.body.className = `subject-${subject}`;
  if (isDarkMode) document.body.classList.add('dark-mode');
  
  
  dashboardEl.classList.remove('active-mode');
  flashcardModeEl.classList.add('active-mode');
  currentMode = 'flashcard';
  
  updateLabels();
  updateCardView();
  
 
  document.getElementById('timer').textContent = '00:00:00';
}

    function backToDashboard() {
      dashboardEl.classList.add('active-mode');
      flashcardModeEl.classList.remove('active-mode');
      currentMode = 'dashboard';
      
      stopTimer();
      updateDashboardTimes();
    }

    function updateLabels() {
      
      const subjectNames = {
        'science': 'SCIENCE',
        'math': 'MATHEMATICS',
        'social-studies': 'SOCIAL STUDIES',
        'computing': 'COMPUTING',
        'english': 'ENGLISH'
      };
      
      const topicNames = {
        'physics': 'PHYSICS',
        'human-body': 'HUMAN BODY',
        'chemistry': 'CHEMISTRY',
        'algebra3': 'ALGEBRA 3',
        'geometry2': 'GEOMETRY 2',
        'social-studies': 'SOCIAL STUDIES',
        'computing': 'COMPUTING',
        'vocabulary': 'VOCABULARY (ANTHOLOGY)',
        'grammar': 'GRAMMAR'
      };
      
      subjectLabelEl.textContent = subjectNames[currentSubject] || currentSubject.toUpperCase();
      topicLabelEl.textContent = topicNames[currentTopic] || currentTopic.toUpperCase();
    }

    function updateCardView() {
      if (filteredCards.length === 0) {
        emptyMessageEl.style.display = 'block';
        controlsEl.style.display = 'none';
        flashcardContainerEl.style.display = 'none';
        progressEl.textContent = "No cards available";
        return;
      }
      
      emptyMessageEl.style.display = 'none';
      controlsEl.style.display = 'flex';
      flashcardContainerEl.style.display = 'block';
      
      const card = filteredCards[currentCardIndex];
      
      
      questionEl.innerHTML = '';
      const questionText = document.createElement('p');
      questionText.textContent = card.question;
      questionEl.appendChild(questionText);
      
      if (card.questionImg) {
        const img = document.createElement('img');
        img.src = card.questionImg;
        img.className = 'flashcard-img';
        img.alt = 'Question image';
        img.style.width = '300px';   
        img.style.height = '200px';  
        questionEl.appendChild(img);
      }
      
      
      answerEl.innerHTML = '';
      const answerText = document.createElement('p');
      answerText.textContent = card.answer;
      answerEl.appendChild(answerText);
      
      if (card.answerImg) {
        const img = document.createElement('img');
        img.src = card.answerImg;
        img.className = 'flashcard-img';
        img.alt = 'Answer image';
        img.style.width = '300px';   
        img.style.height = '200px';  
        answerEl.appendChild(img);
      }
      
      progressEl.textContent = `Card ${currentCardIndex + 1} of ${filteredCards.length}`;
      
      
      document.querySelector('.flashcard').classList.remove('flipped');
    }

    function flipCard() {
      if (filteredCards.length > 0) {
        document.querySelector('.flashcard').classList.toggle('flipped');
      }
    }

    function nextCard() {
      if (filteredCards.length === 0) return;
      
      if (currentCardIndex < filteredCards.length - 1) {
        currentCardIndex++;
      } else {
        currentCardIndex = 0;
      }
      updateCardView();
    }

    function prevCard() {
      if (filteredCards.length === 0) return;
      
      if (currentCardIndex > 0) {
        currentCardIndex--;
      } else {
        currentCardIndex = filteredCards.length - 1;
      }
      updateCardView();
    }

    function markWrong() {
      if (filteredCards.length === 0) return;
      
      wrongCards.push(filteredCards[currentCardIndex]);
      updateReviewBox();
      nextCard();
    }

    function updateReviewBox() {
      if (wrongCards.length > 0) {
        reviewBoxEl.style.display = 'block';
        wrongCardsListEl.innerHTML = wrongCards.map(card => {
          let content = `<li>${card.question}`;
          if (card.questionImg) {
            content += ` <small>[Image]</small>`;
          }
          content += ` → <strong>${card.answer}</strong>`;
          if (card.answerImg) {
            content += ` <small>[Image]</small>`;
          }
          return content + '</li>';
        }).join('');
      } else {
        reviewBoxEl.style.display = 'none';
      }
    }

    function toggleTheme() {
      isDark = !isDark;
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
      
      
      const currentSubjectClass = Array.from(document.body.classList)
        .find(cls => cls.startsWith('subject-'));
        
      document.body.className = currentSubjectClass || '';
      if (isDark) document.body.classList.add('dark-mode');
      
      document.querySelector('.theme-toggle').textContent = isDark ? '🌙' : '☀️';
    }

    
    function formatTime(seconds) {
      const hrs = Math.floor(seconds / 3600);
      const mins = Math.floor((seconds % 3600) / 60);
      const secs = seconds % 60;
      return `${hrs > 0 ? `${hrs}:` : ''}${mins < 10 ? '0' : ''}${mins}:${secs < 10 ? '0' : ''}${secs}`;
    }

    let isPaused = false;
    let startTime = null;

    
function startTimer() {
  if (!timer) {
    startTime = Date.now() - (seconds * 1000);
    timer = setInterval(updateTimer, 1000);
  }
}

function updateTimer() {
  if (!isPaused) {
    const elapsed = Math.floor((Date.now() - startTime) / 1000);
    seconds = elapsed;
    const hours = Math.floor(seconds / 3600);
    const minutes = Math.floor((seconds % 3600) / 60);
    const secs = seconds % 60;
    
    document.getElementById('timer').textContent = 
      `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
    
    
    if (currentSubject && currentTopic) {
      updateTopicTime(currentSubject, currentTopic, 1);
    }
  }
}

    function toggleTimer() {
      isPaused = !isPaused;
      const timerControl = document.getElementById('timerControl');
      const pauseOverlay = document.getElementById('pauseOverlay');
      
      if (isPaused) {
        timerControl.innerHTML = '<span class="timer-icon">▶️</span>';
        pauseOverlay.style.display = 'flex';
      } else {
        timerControl.innerHTML = '<span class="timer-icon">⏸️</span>';
        pauseOverlay.style.display = 'none';
      }
    }

    
    function resumeTimer() {
      isPaused = false;
      document.getElementById('timerControl').innerHTML = '<span class="timer-icon">⏸️</span>';
      document.getElementById('pauseOverlay').style.display = 'none';
    }

    function stopTimer() {
      clearInterval(timer);
      timer = null;
      seconds = 0;
      updateTimerDisplay();
    }

    function updateDashboardTimes() {
      Object.entries(subjectTimes).forEach(([subject, time]) => {
        const badge = document.querySelector(`.subject-${subject} .study-time-badge`);
        if (badge) {
          badge.textContent = `Studied: ${formatTime(time)}`;
        }
      });
    }

    function updateTopicTime(subject, topic, seconds) {
      const key = `${subject}-${topic}`;
      topicTimes[key] = (topicTimes[key] || 0) + seconds;
      
      
      const timeElement = document.querySelector(
        `.topic-time[data-subject="${subject}"][data-topic="${topic}"]`
      );
      if (timeElement) {
        timeElement.textContent = formatTime(topicTimes[key]);
      }
    }

    
    document.addEventListener('keydown', (e) => {
      if (currentMode !== 'flashcard') return;
      
      if (e.key === 'ArrowRight') nextCard();
      if (e.key === 'ArrowLeft') prevCard();
      if (e.key === 'w') markWrong();
    });

    
    updateLabels();
    
    
    document.querySelectorAll('.subject-card').forEach(card => {
      const badge = document.createElement('div');
      badge.className = 'study-time-badge';
      badge.textContent = 'Studied: 00:00:00';
      card.appendChild(badge);
    });

    
let welcomeTimer;

function startWelcomeTimer() {
  let timeLeft = 30;
  const timerBar = document.getElementById('welcomeTimer');
  const countdown = document.getElementById('welcomeCountdown');
  
  timerBar.style.transform = 'scaleX(1)';
  
  welcomeTimer = setInterval(() => {
    timeLeft--;
    timerBar.style.transform = `scaleX(${timeLeft/30})`;
    countdown.textContent = timeLeft;
    
    if (timeLeft <= 0) {
      acceptAndContinue();
    }
  }, 1000);
}

function acceptAndContinue() {
  clearInterval(welcomeTimer);
  const overlay = document.getElementById('welcomeOverlay');
  
  
  localStorage.setItem('welcomeAccepted', 'true');
  
  
  overlay.style.opacity = '0';
  
  setTimeout(() => {
    overlay.style.display = 'none';
    
    
    if (localStorage.getItem('mobileView') === 'true') {
      isMobileView = true;
      document.body.classList.add('mobile-view');
      document.getElementById('mobileIcon').textContent = '💻';
      toggleMobileView();
    }
  }, 500);
}

function updateWelcomeOverlay() {
  const overlay = document.getElementById('welcomeOverlay');
  overlay.innerHTML = `
    <div class="welcome-content">
      <h1>✨ Welcome to Rahi's Study Hub! ✨</h1>
      <p>Your journey to efficient learning starts here.</p>
      <div class="features">
        <p>📚 Smart Flashcards</p>
        <p>⏱️ Study Timer</p>
        <p>📊 Progress Tracking</p>
      </div>
      <div class="welcome-controls">
        <button class="theme-toggle welcome-theme-btn" onclick="toggleTheme()">☀️</button>
        <button class="mobile-toggle welcome-mobile-btn" onclick="toggleMobileView(true)">
          <span id="welcomeMobileIcon">📱</span>
        </button>
      </div>
      <button onclick="acceptAndContinue()" class="welcome-btn">Start Learning</button>
      <p class="agreement">© 2025 All rights reserved</p>
      <div class="timer-bar" id="welcomeTimer"></div>
    </div>
  `;
}

document.addEventListener('DOMContentLoaded', () => {
  updateWelcomeOverlay();
  
  const welcomeAccepted = localStorage.getItem('welcomeAccepted');
  const overlay = document.getElementById('welcomeOverlay');
  
  if (!welcomeAccepted) {
    overlay.style.display = 'flex';
    overlay.style.opacity = '1';
    startWelcomeTimer();
  } else {
    overlay.style.display = 'none';
  }
  
  if (window.innerWidth <= 768 || /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
    isMobileView = true;
    document.body.classList.add('mobile-view');
    document.getElementById('mobileIcon').textContent = '💻';
    toggleMobileView();
  }

  
  const savedView = localStorage.getItem('mobileView');
  if (savedView === 'true') {
    isMobileView = true;
    document.body.classList.add('mobile-view');
    document.getElementById('mobileIcon').textContent = '💻';
    toggleMobileView();
  }
});


   
    document.querySelectorAll('.topic').forEach(topic => {
      topic.addEventListener('click', (e) => {
        e.stopPropagation();
      });
    });

    
    document.addEventListener('DOMContentLoaded', () => {
      
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme === 'dark') {
        isDark = true;
        document.body.classList.add('dark-mode');
        document.querySelector('.theme-toggle').textContent = '🌙';
      }
    });

   
function updateClock() {
  const now = new Date();
  const hours = now.getHours();
  const minutes = now.getMinutes();
  const seconds = now.getSeconds();

  const hourDeg = ((hours % 12) * 30) + (minutes * 0.5);
  const minuteDeg = minutes * 6;
  const secondDeg = seconds * 6;

  const hourHand = document.querySelector('.hour');
  const minuteHand = document.querySelector('.minute');
  const secondHand = document.querySelector('.second');

  hourHand.style.transform = `translateX(-50%) rotate(${hourDeg}deg)`;
  minuteHand.style.transform = `translateX(-50%) rotate(${minuteDeg}deg)`;
  secondHand.style.transform = `translateX(-50%) rotate(${secondDeg}deg)`;
}


setInterval(updateClock, 1000);
updateClock(); 


let isMobileView = false;

function toggleMobileView(fromWelcome = false) {
  isMobileView = !isMobileView;
  
  if (fromWelcome && document.getElementById('welcomeOverlay').style.display !== 'none') {
    localStorage.setItem('mobileView', isMobileView);
    document.getElementById('mobileIcon').textContent = isMobileView ? '💻' : '📱';
    return;
  }

  document.body.classList.toggle('mobile-view');

  if (isMobileView) {
    
    document.documentElement.style.zoom = "0.9";
    document.querySelector('.clock-container').style.transform = 'scale(0.6)';
    document.querySelector('.flashcard-container').style.width = '100%';
    document.querySelector('.timer-container').classList.add('mobile-timer');
    
   
    document.querySelectorAll('button').forEach(btn => {
      btn.style.padding = '12px';
      btn.style.fontSize = '1rem';
    });
  } else {
    
    document.documentElement.style.zoom = "1";
    document.querySelector('.clock-container').style.transform = 'scale(0.85)';
    document.querySelector('.flashcard-container').style.width = 'calc(100% - 250px)';
    document.querySelector('.timer-container').classList.remove('mobile-timer');
    
    
    document.querySelectorAll('button').forEach(btn => {
      btn.style.padding = '10px 20px';
      btn.style.fontSize = '1rem';
    });
  }

  document.getElementById('mobileIcon').textContent = isMobileView ? '💻' : '📱';
  localStorage.setItem('mobileView', isMobileView);

  if (currentMode === 'flashcard') {
    updateCardView();
  }
}


document.addEventListener('DOMContentLoaded', () => {
  
  if (window.innerWidth <= 768) {
    isMobileView = true;
    document.body.classList.add('mobile-view');
    document.getElementById('mobileIcon').textContent = '💻';
    toggleMobileView();
  }
  
 
  const savedView = localStorage.getItem('mobileView');
  if (savedView === 'true') {
    isMobileView = true;
    document.body.classList.add('mobile-view');
    document.getElementById('mobileIcon').textContent = '💻';
    toggleMobileView();
  }
});


function openNotes(topic, event) {
  if (event) {
    event.stopPropagation();
  }
  
  currentNotesTopic = topic;
  const modal = document.getElementById('notesModal');
  const notesArea = document.getElementById('notesArea');
  const notesTitle = document.getElementById('notesTitle');
  
  // Set title based on topic
  const topicNames = {
    'physics': 'Physics Notes',
    'human-body': 'Human Body Notes',
    'chemistry': 'Chemistry Notes',
    'social-studies': 'Social Studies Notes'
  };
  
  notesTitle.textContent = topicNames[topic] || 'Notes';
  
  // Load saved notes
  notesArea.value = notesDatabase[topic] || '';
  
  modal.style.display = 'flex';
}

function closeNotes() {
  const modal = document.getElementById('notesModal');
  modal.style.display = 'none';
}

function saveNotes(event) {
  const notesArea = document.getElementById('notesArea');
  notesDatabase[currentNotesTopic] = notesArea.value;
  localStorage.setItem('studyNotes', JSON.stringify(notesDatabase));
  
  // Show save confirmation
  const saveBtn = event.target;
  const originalText = saveBtn.textContent;
  saveBtn.textContent = '✓ Saved!';
  setTimeout(() => {
    saveBtn.textContent = originalText;
  }, 1500);
}

// Add this event listener to close notes when clicking outside
document.getElementById('notesModal').addEventListener('click', (e) => {
  if (e.target === e.currentTarget) {
    closeNotes();
  }
});
  </script>

  
  <footer class="site-footer">
    <div class="contact-info">
      <p>📧 Contact: gardi2386@gmail.com</p>
      <p>📞 Phone: +964 751 201 9773</p>
    </div>
    <p class="copyright">© 2025 Rahi's Study Hub. All rights reserved.</p>
  </footer>
</body>
</html>